# API 测试文档

本文档说明如何使用 REST Client 测试 Project Alpha 的 API 端点。

## 前置要求

1. 确保后端服务正在运行（默认端口：3000）
2. 确保数据库已初始化并运行了迁移
3. 安装 REST Client 扩展（VS Code 或 JetBrains IDE）

## 测试文件

- `api-test.rest` - 包含所有 API 端点的测试用例

## 使用方法

### 1. 配置环境变量

在 `api-test.rest` 文件顶部，更新 `@baseUrl` 变量以匹配你的服务器地址：

```http
@baseUrl = http://127.0.0.1:3000
```

### 2. 运行测试

1. 打开 `api-test.rest` 文件
2. 点击每个请求上方的 "Send Request" 按钮（VS Code）或使用快捷键
3. 查看响应结果

### 3. 设置变量

在运行测试时，需要手动设置以下变量：
- `@ticketId` - 从创建 ticket 的响应中获取
- `@tagId` - 从创建 tag 的响应中获取
- `@tagId2` - 从创建第二个 tag 的响应中获取

## 测试覆盖范围

### Tag API 测试
- ✅ 获取所有标签
- ✅ 创建标签
- ✅ 获取单个标签
- ✅ 更新标签（完整和部分更新）
- ✅ 删除标签
- ✅ 重复标签验证
- ✅ 404 错误处理

### Ticket API 测试
- ✅ 获取所有 tickets
- ✅ 创建 ticket（带/不带标签）
- ✅ 获取单个 ticket
- ✅ 更新 ticket（完整和部分更新）
- ✅ 删除 ticket
- ✅ 切换完成状态
- ✅ 添加/移除标签
- ✅ 筛选功能（标签、完成状态、搜索）
- ✅ 组合筛选
- ✅ 404 错误处理
- ✅ 验证错误处理

## 测试数据

测试文件使用示例数据。建议先运行 `seed.sql` 文件加载测试数据，然后再运行 API 测试。

## 注意事项

1. 某些测试依赖于之前的测试结果（如需要 ticket ID）
2. 建议按顺序运行测试
3. 清理测试数据可以使用文件末尾的清理请求
